<!doctype html>
<html>
<head>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<title>Publishing</title>
	<script type="text/javascript">
		var onloadCallback = function() {
			grecaptcha.render('div-recap', {
			  'sitekey' : '6Lf-R0QUAAAAAP5Dl3AtIqFj4zFfHtu0Anm-vyuJ'
			});
		};
	</script>
</head>
<body class="container">
	<h1>Publishing website via github</h1>
	<div id="banner-message">Some div</div>
	<button type="button">Hide</button>
	<div id="resposta"></div>
	<input type="button" id="json" value="Get JSON"/>
	<hr/>
	<div id="result"></div>
	<h3>Submiting form with recaptcha</h3>
	<form method="post" id="recap" action="https://aliens-abduction.herokuapp.com/recaptcha.php">
		<div id="div-recap"></div> 
		<!--class="g-recaptcha" data-sitekey="6Lf-R0QUAAAAAP5Dl3AtIqFj4zFfHtu0Anm-vyuJ"></div>-->
		<input type="submit" value="Submit"/>
	</form>
	<script type="text/javascript" src="scripts/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="scripts/bootstrap.min.js"></script>
	<script type="text/javascript" src='https://www.google.com/recaptcha/api.js?hl=pt-BR'></script>
	<script type="text/javascript">
		var hiddenBox = $("#banner-message");
		$("button").on("click", function(event){
			hiddenBox.show();
			$("button").html("Hide");
		});
		$("button").on("dblclick", function(event){
			hiddenBox.hide();
			$("button").html("Show");
		});
	</script>
	<script type="text/javascript">
		$("#json").on("click", function(){
			console.log('click');
			var req = new XMLHttpRequest();
			req.open("get", "https://aliens-abduction.herokuapp.com/json.php", true);
			//req.setRequestHeader('Access-Control-Allow-Origin', 'https://aliens-abduction.herokuapp.com/json.php');
			req.addEventListener("load", function(){
				console.log('Status da request: ' + req.status);
				//var jsonObject = JSON.parse(req.responseText);
				document.getElementById("resposta").innerHTML = req.responseText;
			});
			req.send(null);
		});
		
		$("#recap").submit(function(e){
			//e.preventDefault();
			$.ajax({
				type: "post",
				url: $("form").attr('action'),
				data: $("form").serialize(),
				success: function(response){
					$("#result").html(response);
				},
				error: function(data){
					console.log("some error occored", data);
				}
			});
			
		});
	</script>
	<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit">
		async defer
	</script>
</body>
</html>